CREATE TABLE feeds(
	id SERIAL PRIMARY KEY,
	name VARCHAR (255) NOT NULL,
  normalized VARCHAR (255) NOT NULL,
	uri VARCHAR (255) UNIQUE NOT NULL,
  updated TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  healthy BOOLEAN NOT NULL DEFAULT TRUE,
  last_pub TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE userfeeds(
    user_id BIGINT NOT NULL,
    feed_id INTEGER NOT NULL,
    added TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,

    PRIMARY KEY (user_id, feed_id),

    CONSTRAINT userfeeds_feed_fk FOREIGN KEY (feed_id)
      REFERENCES feeds (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
);